Quero que voc√™ atue como um desenvolvedor backend profissional especializado em FastAPI e implemente autentica√ß√£o segura e controle de acesso no meu sistema WMS.

üìå Contexto do Projeto

O backend est√° em FastAPI (estrutura semelhante √†s imagens enviadas).

O frontend est√° separado em SGA-Frontend com arquivos HTML est√°ticos.

O backend utiliza tabelas como DimUsuario e DimProfessor no banco.

‚úÖ N√ÉO ALTERE NADA NO FRONTEND ‚Äì trabalhar somente no backend.

O login atual √© simples e precisa ser profissional, seguro e funcional.

‚úÖ Objetivos
üîê Parte 1: Sistema de Login Profissional (JWT)

Implementar ou corrigir a autentica√ß√£o no backend para:

Fazer login com email e senha.

Validar o usu√°rio no banco corretamente.

Diferenciar se √© Professor ou Usu√°rio padr√£o consultando:

DimProfessor (professores)

DimUsuario (usu√°rios comuns)

Retornar para o frontend um JSON nesse formato:

{
  "access_token": "JWT_TOKEN",
  "token_type": "bearer",
  "tipo_usuario": "professor", // ou "usuario"
  "email": "usuario@teste.com"
}


Proteger rotas privadas com JWT.

Criar arquivo security.py se necess√°rio.

Usar hash de senha (passlib).

üë®‚Äçüè´ Parte 2: Funcionar Tela de Adicionar Usu√°rio (Professor)

A tela http://127.0.0.1:5500/SGA-Frontend/public/adicionarUsuario.html deve funcionar usando o backend.

Professores podem criar novos usu√°rios.

Rota POST /usuarios ou POST /auth/register deve:

Validar token JWT.

Verificar se quem est√° cadastrando √© Professor.

Salvar o campo inserido_por automaticamente com email do usu√°rio logado.

Criar o novo usu√°rio com senha hash.

Retornar JSON de confirma√ß√£o.

‚úÖ Regras Obrigat√≥rias

Analise as rotas existentes no projeto antes (em auth.py, usuarios.py, etc).

Use apenas a estrutura que j√° existe no backend.

N√£o alterar nenhuma p√°gina HTML, somente backend.

Proteger as rotas com JWT.

C√≥digo limpo, organizado e profissional.

‚úÖ Entreg√°veis

Na resposta, entregue:
‚úÖ Arquivos Python modificados ou criados
‚úÖ Rotas corrigidas/implementadas
‚úÖ Schemas e models atualizados se necess√°rio
‚úÖ Configura√ß√£o de seguran√ßa JWT
‚úÖ Explica√ß√£o r√°pida de como testar

Comece analisando meu backend e me pergunte o que for necess√°rio.
IMPORTANTE: Use as tabelas DimUsuario e DimProfessor para definir o tipo de usu√°rio. O backend deve reconhecer o tipo automaticamente.
Quando estiver pronto, gere o c√≥digo.